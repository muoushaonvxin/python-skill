
## 死信队列

<br/>

DLX, 全称为 Dead-Letter-Exchange, 可以称之为死信交换器, 也有人称为死信邮箱. 当消息在一个队列中变成死信 (dead message) 之后. 它能被重新被发送到另一个交换器中, 这个交换器就是 DLX, 绑定 DLX的队列就称之为死信队列. 

消息变成死信一般是由以下几种情况
1) 消息被拒绝 (Basic.Reject/Basic.Nack), 并且设置 requeue 参数为false
2) 消息过期
3) 队列达到最大长度

DLX 也是一个正常的交换器, 和一般的交换器没有区别, 它能在任何的队列上被指定, 实际上就是设置某个队列的属性. 当这个队列中存在死信时, RabbitMQ 就会自动将这个消息重新发布到设置的 DLX 上去, 进而被路由到另一个队列, 即死信队列. 可以监听这个队列中的消息以进行相应的处理, 这个特性与将消息的 TTL 设置为0配合使用可以弥补 immediate 参数的功能.

通过在 channel.queue_declare 方法中设置 x-dead-letter-exchange 参数来为这个队列添加 DLX

```python

```
