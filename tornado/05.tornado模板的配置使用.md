

import os

class IndexHandler(RequestHandler):
    def get(self, *args, **kwargs):
        self.write("lucky guy")
        
class HomeHandler(RequestHandler):
    def get(self, *args, **kwargs):
        self.write("lucky guy")
        
class SunckHandler(RequestHandler):
    def initialize(self, word1, word2):
        self.word1 = word1
        self.word2 = word2

    def get(self, *args, **kwargs):
        self.write("sunck guy")
        
class Json1Handler(RequestHandler):
    def get(self, *args, **kwargs):
        mes = {"aaa": 123, "bbb": 456}
        jsonStr = json.dumps(mes)
        self.set_header("Content-Type", "application/json; charset=UTF-8")
        self.set_header("sunck", "good")
        self.write(jsonStr)
        
class Json2Handler(RequestHandler):
    def get(self, *args, **kwargs):
        mes = {"aaa": 123, "bbb": 456}
        self.write(mes)
        
class HeaderHandler(RequestHandler):
    def set_default_headers(self):
        self.set_header("Content-Type", "text/html; charset=UTF-8")

    def get(self, *args, **kwargs):
        pass
        
    def post(self, *args, **kwargs):
        pass
        
class StatusCodeHandler(RequestHandler):
    def get(self, *args, **kwargs):
        self.set_status(999, "who am i, where i am")
        self.write("##########################")
        
class RedirectHandler(RequestHandler):
    def get(self, *args, **kwargs):
        self.redirect("/")

class ErrorHandler(RequestHandler):
    def write_error(self, status_code, **kwargs):
        if status_code == 500:
            code = 500
            self.write("服务器内部错误")
        elif status_code == 404:
            code = 404
            self.write("资源不存在")
        else:
            code = 999
            self.write("我也不知道是什么错误")
        self.set_status(code)
        
    def get(self, *args, **kwargs):
        flag = self.get_query_argument("flag")
        if flag == 0:
            self.send_error(500)
        self.write("you are right")
        
class ZhangHeHandler(RequestHandler):
    def get(self, *args, **kwargs):
        self.get_query_argument("a",default=100,strip=True)
        self.write("lucky guy")
        
class ZhangZiBuHandler(RequestHandler):
    def get(self, *args, **kwargs):
        alist = self.get_query_arguments("a",strip=True)
        print(alist[0], alist[1])
        self.write("lucky guy")
        
class PostFileHandler(RequestHandler):
    def get(self, *args, **kwargs):
        self.render('postfile.html')
        
    def post(self, *args, **kwargs):
        name = self.get_body_argument("name")
        passwd = self.get_body_argument("passwd")
        hobbyList = self.get_body_arguments("hobby")
        print(name, passwd, hobbyList)
        self.write("lucky guy")
        
class ZhuyiHandler(RequestHandler):
    def get(self, *args, **kwargs):
        print(self.request.method)
        print(self.request.host)
        print(self.request.uri)
        print(self.request.path)
        print(self.request.query)
        print(self.request.version)
        print(self.request.headers)
        print(self.request.body)
        print(self.request.remote_ip)
        print(self.request.files)
        self.write("lucky guy")
        
class UpFileHandler(RequestHandler):
    def get(self. *args, **kwargs):
        self.render("upfile.html")
        
    def post(self, *args, **kwargs):
        filesDict = self.request.files
        for inputname in filesDict:
            fileArr = filesDict[inputname]
            for fileObj in fileArr:
                filePath = os.path.join(config.BASE_DIRS, 'upfile/' + fileObj[filename])
                with open(filePath, 'wb') as f:
                    f.write(fileObj[body])
        self.write("ok")
```


接下来需要将url设置给分离出来进行引用, 在根目录下创建一个 application.py 的文件
```python
import tornado.web
from views import index
import config

class Application(tornado.web.Application):
    def __init__(self):
        handlers = [
            (r'/', index.IndexHandler),
            (r'/home', index.HomeHandler),
            (r'/sunck', index.SunckHandler, {"word1": "good", "word2": "nice"}),
            (r'/json1', index.Json1Handler),
            (r'/json2', index.Json2Handler),
            (r'/header', index.HeaderHandler),
            (r'/status', index.StatusCodeHandler),
            (r'/redirect', index.RedirectHandler)，
            (r'/iserror', index.ErrorHandler),
            (r'/zhanghe', index.ZhangHeHandler),
            (r'/zhangzibu', index.ZhangZiBuHandler),
            (r'/postfile', index.PostFileHandler),
            (r'/zhuyi', index.ZhuyiHandler),
            (r'/upfile', index.UpFileHandler)
        ]
        super(Application, self).__init__(handlers, **config.settings)
```

编辑主入口文件 server.py

```python
import config
from application import Application
import tornado.ioloop

if __name__ == "__main__":
    app = Application()
    httpServer = tornado.httpserver.HTTPServer(app)
    httpServer.bind(config.options["port"])
    httpServer.start(1)
    tornado.ioloop.IOLoop.current().start()
```
